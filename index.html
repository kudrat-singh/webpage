<script>
const qs = id => document.getElementById(id);
const sanitize = v => String(v||"").trim().toLowerCase();

/* Intro page button */
qs("startBtn").onclick = function(){
  qs("intro").style.display = "none";
  qs("gate").style.display = "block";
}

/* Gate question */
qs("loveSubmit").onclick = function(){
  const love = sanitize(qs("ans3").value);
  if(love === "yes"){
    qs("emoji").textContent = "ðŸ¥°â¤ï¸";
    setTimeout(showEnvelope, 500);
  } else if(love === "no"){
    qs("emoji").textContent = "ðŸ’”ðŸ¥€";
  }
}

/* Show envelope first */
function showEnvelope(){
  qs("gate").style.display="none";
  const env = qs("envelope");
  env.style.display = "block";

  env.onclick = function(){
    env.classList.add("open");
    setTimeout(showLetter, 1200);
  }
}

/* Show letter page */
function showLetter(){
  qs("envelope").style.display="none";
  const main = qs("main");
  main.style.display = "block";
  main.style.opacity = 1;

  qs("letterText").textContent = `Hey Ambika â¤ï¸

Today is 14th November 2025, and weâ€™ve been 10 months togetherâ€¦ no nazar at all ðŸ˜˜. I love you so much, Ambika. There hasnâ€™t been a single day I didnâ€™t think about you, or a single night that ended without our sweet (sometimes spicy!) conversations.

The day you entered my life, everything changed. My world, once black and white, suddenly became colourful and full of joy âœ¨. Yes, we argue sometimes, we step on the wrong footâ€”but these are just tiny parts of life. My feelings for you are even stronger than day one ðŸ’–.

Youâ€™re my last thought before sleeping and my first thought when I wake up. I know weâ€™re in an important phase of life, and maybe I shouldnâ€™t wish you today, but I couldnâ€™t resist. I wanted to make you feel specialâ€¦ and tell you how much you mean to me ðŸ«¶.

I know exams are coming, so I donâ€™t want to distract you. This is just a small gestureâ€”a thank you for everything: for being in my life, for making me feel lucky, for making me happy every single day. You deserve all the good things in this world, Ambika. And Iâ€™m ready to give you mine â¤ï¸.

I always want you to be happy. I know sometimes I make you sad or anxious, and Iâ€™m genuinely sorry ðŸ’”. But my love for you is pure and true. Your place in my heart will never changeâ€”Ambika Dutta owns it completely â¤ï¸â€ðŸ”¥.

Even if things get tough, my feelings will never fade. Iâ€™ll support you, motivate you, and stand by you always. I trust you completely, because I know youâ€™ll keep my heart safe too.

These were just 10 months, Ambikaâ€¦ we have a long, beautiful journey ahead: to grow, to love, to achieve, and to stay together. Iâ€™ll wait for you, no matter how long it takes.

I love you so much, my foreverâ€¦ my bsf ðŸ’žðŸ‘©â€â¤ï¸â€ðŸ‘¨âœ¨

â€” Your Kudrat`;

  qs("bgSong").play().catch(()=>{});

  // Show final Q&A after 2s
  setTimeout(showFinalQA, 2000);
}

/* Show final Q&A */
function showFinalQA(){
  qs("main").style.display="none";
  qs("finalQA").style.display="block";

  qs("yesForever").onclick = function(){
    qs("finalEmoji").textContent = "ðŸ¥°ðŸ’–ðŸ¥³";
    fadeSongs(qs("bgSong"), qs("finalSong"));
  }
}

/* Function to fade out old song and fade in new song */
function fadeSongs(oldSong, newSong){
  let vol = oldSong.volume;
  const fadeOut = setInterval(()=>{
    if(vol > 0.05){
      vol -= 0.05;
      oldSong.volume = vol;
    } else {
      clearInterval(fadeOut);
      oldSong.pause();
      newSong.volume = 0;
      newSong.play().catch(()=>{});
      let newVol = 0;
      const fadeIn = setInterval(()=>{
        if(newVol < 1){
          newVol += 0.05;
          newSong.volume = newVol;
        } else {
          clearInterval(fadeIn);
          newSong.volume = 1;
        }
      }, 100);
    }
  }, 100);
}
</script>
